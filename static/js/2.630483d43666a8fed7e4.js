webpackJsonp([2],{dK9C:function(t,e){t.exports={render:function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("section",[r("el-row",{staticClass:"btnClass"},[r("div",{staticClass:"seach-left"},[r("el-input",{staticClass:"input-with-search",attrs:{placeholder:"请输入名称"},nativeOn:{keyup:function(t){return"button"in t||!a._k(t.keyCode,"enter",13,t.key,"Enter")?a.searchTable(t):null}},model:{value:a.searchInput,callback:function(t){a.searchInput=t},expression:"searchInput"}},[r("el-button",{attrs:{slot:"append",icon:"icon iconfont icon-ir-search"},on:{click:a.searchTable},slot:"append"})],1),a._v(" "),r("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","value-format":"timestamp","end-placeholder":"结束日期"},on:{change:a.handledateValue},model:{value:a.dateValue,callback:function(t){a.dateValue=t},expression:"dateValue"}})],1)]),a._v(" "),[r("el-row",{staticClass:"rf-swap"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData.content,"tooltip-effect":"dark",height:"calc(100vh - 200px)"},on:{"sort-change":a.getOrder}},[r("el-table-column",{attrs:{label:"名称",prop:"name",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("span",[a._v("\n\t\t\t\t\t\t\t\t"+a._s(t.row.name)+"\n\t\t\t\t\t\t\t")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"数据源",prop:"dataSource","min-width":"90",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("span",[a._v("\n\t\t\t\t\t\t\t\t"+a._s(t.row.dataSource)+"\n\t\t\t\t\t\t\t")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"同步对象",prop:"object",width:"150",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(e){return["JDBC"==JSON.parse(e.row.taskJson).dataSource.type?r("span",{staticStyle:{"padding-left":"-15px"},on:{click:function(t){a.objectDialog(e.row.dataSourceId,e.row.object,e.row.collecterId)}}},[a._v("\n\t\t\t\t\t\t\t\t"+a._s(e.row.object)+"\n\t\t\t\t\t\t\t")]):r("span",[a._v(a._s(e.row.object))])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"数据集",prop:"dataStore",sortable:"custom","min-width":"90"}}),a._v(" "),r("el-table-column",{attrs:{label:"周期情况",prop:"trigger",width:"100",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[""==t.row.trigger?r("span",[a._v("单次执行")]):r("span",[a._v("周期执行")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180",formatter:a.dateFormat,sortable:"custom"}}),a._v(" "),r("el-table-column",{attrs:{label:"状态",prop:"status",width:"80",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[0==t.row.status?r("div",{staticClass:"status-div-create"},[a._v("已创建")]):1==t.row.status?r("div",{staticClass:"status-div-deploy"},[a._v("已部署")]):2==t.row.status?r("div",{staticClass:"status-div-stop"},[a._v("已停止")]):-1==t.row.status?r("div",{staticClass:"status-div-error"},[a._v("错 误")]):r("div",[a._v("未知")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"最后执行时间",prop:"lastExecuteTime",width:"180",formatter:a.dateFormat,sortable:"custom"}}),a._v(" "),r("el-table-column",{attrs:{label:"最后执行状态",prop:"lastExecuteStatus",width:"130",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(t){return[0==t.row.lastExecuteStatus?r("div",[a._v("创建")]):1==t.row.lastExecuteStatus?r("div",[a._v("运行中")]):2==t.row.lastExecuteStatus?r("div",[a._v("完成")]):-1==t.row.lastExecuteStatus?r("div",[a._v("失败")]):r("div",[a._v("未知")])]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"最后读入",prop:"lastReadIn",width:"100",sortable:"custom"}}),a._v(" "),r("el-table-column",{attrs:{label:"最后写出",prop:"lastWriteOut",width:"100",sortable:"custom"}})],1),a._v(" "),r("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[8,16,50,100],"page-size":a.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:a.tableData.totalElements},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)]],2)},staticRenderFns:[]}},nyl9:function(t,e){},rUcb:function(t,e,a){a("nyl9");var r=a("VU/8")(a("xnMJ"),a("dK9C"),"data-v-8f4d94a6",null);t.exports=r.exports},xnMJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,s=a("Wyan"),l=a("P9l9"),o=a("DoGJ"),n=(r=o)&&r.__esModule?r:{default:r};e.default={components:{ElRow:n.default},data:function(){return{searchInput:"",startTime:"",endTime:"",tableData:{},parameter:"",currentPage:1,collectorId:"_ALL_COLLECTER_JOBS_",pagesize:8,prop:"lastModifiedTime",orderDirection:"DESC",dateValue:""}},methods:{searchTable:function(){this.currentPage=1;var t=this.buildParameters();this.getCollectorTasks(t)},handledateValue:function(t){this.dateValue=null==t?[]:[t[0],t[1]+86399e3],this.currentPage=1;var e=this.buildParameters();this.getCollectorTasks(e)},buildParameters:function(){var t=this.pagesize,e=(this.currentPage-1)*this.pagesize,a=0<this.searchInput.length?"%"+this.searchInput+"%":"%",r=(0,s.createParameter)().Limit(t).Offset(e).Build();return"%"!=a&&(r=(0,s.createParameter)("name",a,"LIKE").Build(r)),this.dateValue&&""!=this.dateValue&&0!=this.dateValue.length&&(r=(0,s.createParameter)("lastModifiedTime",Number(this.dateValue[0]),"GREATER_THAN").And("lastModifiedTime",Number(this.dateValue[1]),"LESS_THAN").Build(r)),r},handleSizeChange:function(t){this.pagesize=t,this.parameter=(0,s.createParameter)().Build(this.buildParameters(this.pagesize,this.currentPage,this.startTime,this.endTime,this.searchInput)),this.getCollectorTasks(this.parameter)},handleCurrentChange:function(t){this.currentPage=t;this.buildParameters();this.getCollectorTasks(this.parameter)},getCollectorTasks:function(t){var e=this;t||(t=this.parameter),this.loading=!0,(0,l.getCollectorTaskList)(this.collectorId,t).then(function(t){e.tableData=t,e.total=t.total,e.loading=!1},function(t){e.$message({message:t.response.message,type:"error",duration:1500})})},searchListTable:function(t,e,a,r,s,l){var o=this;o.currentPage=1,l&&(o.pagesize=l),a&&(o.startTime=a),r&&(o.endTime=r),null!=s&&(o.searchInput=s),o.parameter=o.buildParameters(o.pagesize,o.currentPage,o.startTime,o.endTime,o.searchInput),this.getCollectorTasks(o.parameter)},getOrder:function(t){if("ascending"===t.order?this.orderDirection="ASC":this.orderDirection="DESC",this.prop=t.prop,null===t.prop)return!(this.prop="lastModifiedTime");this.currentPage=1;var e=this.buildParameters();this.getCollectorTasks(e)}},mounted:function(){var t=this;t.parameter=t.buildParameters(t.pagesize,t.currentPage,t.startTime,t.endTime,t.searchInput),t.getCollectorTasks(t.parameter)}}}});