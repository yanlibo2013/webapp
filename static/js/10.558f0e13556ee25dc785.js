webpackJsonp([10],{"2h2Q":function(e,t,a){a("6KOP");var s=a("VU/8")(a("N3sL"),a("ipXI"),"data-v-2d84c052",null);e.exports=s.exports},"6KOP":function(e,t){},N3sL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=d(a("mvHQ")),i=d(a("6Kb7")),r=d(a("dwSd")),n=d(a("BfDE")),o=d(a("MHZg")),l=d(a("TPXk")),c=d(a("6MSL")),u=a("P9l9"),h=(a("P9l9"),a("Wyan")),p=d(a("kM3G"));d(a("OfjJ"));function d(e){return e&&e.__esModule?e:{default:e}}(0,h.queryObject)();t.default={components:{searchDateData:i.default,searchTableData:r.default,previewDataSet:n.default,previewObject:o.default,previewTaskName:l.default,previewDataSource:c.default},data:function(){return{dataStoreId:"",isShowDialog:!1,cols:[],multipleSelection:[],option:"layout",tableData:{},show:!1,currentPage:1,pagesize:8,loading:!0,self:this,startTime:"",endTime:"",searchInput:"",parameter:"",form:"",dialogNewTaskJsonVisible:!1,orderDirection:"DESC",prop:"lastModifiedTime",field:""}},methods:{ShowDialog:function(){this.isShowDialog=!1},handleSizeChange:function(e){this.pagesize=e,this.parameter=(0,h.createParameter)().Build(this.buildParameters(this.pagesize,this.currentPage,this.startTime,this.endTime,this.searchInput)),this.parameter.sortObject.field=this.prop,this.parameter.sortObject.orderDirection=this.orderDirection,this.getSynchronizationTasks(this.parameter,this.resType)},handleCurrentChange:function(e){this.currentPage=e,this.parameter=this.buildParameters(this.pagesize,this.currentPage,this.startTime,this.endTime,this.searchInput),this.parameter.sortObject.field=this.prop,this.parameter.sortObject.orderDirection=this.orderDirection,this.getSynchronizationTasks(this.parameter,this.resType)},handleSelectionChange:function(e){this.multipleSelection=e},newTask:function(){localStorage.taskEntity=(0,s.default)({isCopy:!1}),this.$router.push({path:"/task/add/WOVEN-SERVER/synchronization"})},copyTask:function(){this.multipleSelection[0].isCopy=!0,localStorage.taskEntity=(0,s.default)(this.multipleSelection[0]),this.$router.push({path:"/task/add/WOVEN-SERVER/synchronization"})},searchListTable:function(e,t,a,s,i,r){var n=this;n.currentPage=1,r&&(n.pagesize=r),n.startTime=a,n.endTime=s,null!=i&&(n.searchInput=i);for(var o=n.parameter.fieldList.length,l=n.parameter.fieldList.slice(0),c=0;c<o;c++){if("undefined"===a||"lastModifiedTime"!==l[c].fieldName||"GREATER_THAN"!=l[c].comparatorOperator&&"LESS_THAN"!=l[c].comparatorOperator){if(null!=i&&"name"===l[c].fieldName){var u;-1<(u=n.parameter.fieldList.indexOf(l[c]))&&n.parameter.fieldList.splice(u,1)}}else-1<(u=n.parameter.fieldList.indexOf(l[c]))&&n.parameter.fieldList.splice(u,1)}n.parameter=n.buildParameters(n.pagesize,n.currentPage,n.startTime,n.endTime,n.searchInput,this.parameter.fieldList),this.parameter=(0,h.createParameter)().Sort(this.prop,this.orderDirection).Build(n.parameter,!1),this.getSynchronizationTasks(n.parameter)},getSynchronizationTasks:function(e){var t=this;e||(e=this.parameter),this.loading=!0,(0,u.getSynchronizationTaskList)(e).then(function(e){t.tableData=e,t.loading=!1},function(e){t.$message({message:e.response.message,type:"error",duration:1500})})},delTable:function(){var t=this,a=this,s=[];this.multipleSelection.forEach(function(e,t){var a=e.id;s.push(a)}),a.$confirm("真的要删除"+s.length+"个数据导入任务?","提示",{}).then(function(){(0,u.deleteTasks)(s).then(function(e){a.getSynchronizationTasks(t.parameter),a.$message({message:"恭喜你，删除已成功！",type:"success"})},function(e){t.$message({message:e.response.message,type:"error",duration:1500})})}).catch(function(){})},startTask:function(){var t=this;if(this.multipleSelection){var a=this,s=[];this.multipleSelection.forEach(function(e){s.push(e.id)}),(0,u.startTasks)(s).then(function(e){a.getSynchronizationTasks(t.parameter),a.$message({message:"恭喜你，任务已启用！",type:"success"})},function(e){t.$message({message:e.response.message,type:"error",duration:1500})})}},stopTask:function(){var t=this;if(this.multipleSelection){var a=this,s=[];this.multipleSelection.forEach(function(e){s.push(e.id)}),(0,u.stopTasks)(s).then(function(e){a.getSynchronizationTasks(t.parameter),a.$message({message:"恭喜你，任务已停用！",type:"success"})},function(e){t.$message({message:e.response.message,type:"error",duration:1500})})}},dataPreview:function(e,t){this.$refs.dataset.dataPreview(e,t)},nameDialog:function(e){this.$refs.taskName.nameDialog(e)},datasourceDialog:function(e){this.dataStoreId=e,this.isShowDialog=!0},objectDialog:function(e,t){this.$refs.object.objectDialog(e,t)},getOrder:function(e){if("ascending"===e.order?this.orderDirection="ASC":this.orderDirection="DESC",this.prop=e.prop,null===e.prop)return!(this.prop="lastModifiedTime");this.currentPage=1,this.parameter=(0,h.createParameter)().Limit(this.pagesize).Sort(e.prop,this.orderDirection).Build(),this.getSynchronizationTasks(this.parameter)}},mounted:function(){var e=this;e.searchInput=e.$route.params.searchVal,e.parameter=e.buildParameters(e.pagesize,e.currentPage,e.startTime,e.endTime,e.searchInput),e.getSynchronizationTasks(e.parameter),p.default.$on("refreshSynchronizationList",function(){e.getSynchronizationTasks()})},watch:{$route:function(e,t){var a=this;a.parameter=a.buildParameters(a.pagesize,a.currentPage,a.startTime,a.endTime,a.searchInput),"执行列表"==t.name&&a.getSynchronizationTasks()}}}},ipXI:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",[a("el-row",{staticClass:"btnClass"},[a("div",{staticClass:"seach-left"},[a("search-table-data",{ref:"refSearchTable",attrs:{pagesize:t.pagesize,startTime:t.startTime,endTime:t.endTime},on:{searchKey:t.searchListTable}}),t._v(" "),a("search-date-data",{ref:"refSearchDate",attrs:{pagesize:t.pagesize,searchInput:t.searchInput},on:{searchDate:t.searchListTable}})],1)]),t._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData.content,"tooltip-effect":"dark",id:"bm-com-global-search-dataImport-table",height:"calc(100vh - 200px)"},on:{"selection-change":t.handleSelectionChange,"sort-change":t.getOrder}},[a("el-table-column",{attrs:{label:"名称",prop:"name","min-width":"100",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"数据源",prop:"dataSource","min-width":"90",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"同步对象",prop:"object","min-width":"100",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"数据集",prop:"dataStore","min-width":"90",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"周期情况",prop:"trigger","min-width":"100",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.trigger?a("span",[t._v("单次执行")]):a("span",[t._v("周期执行")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime","min-width":"100",align:"center",formatter:t.dateFormat,sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"80",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("div",{staticClass:"status-div-create"},[t._v("已创建")]):1==e.row.status?a("div",{staticClass:"status-div-deploy"},[t._v("已部署")]):2==e.row.status?a("div",{staticClass:"status-div-stop"},[t._v("已停止")]):-1==e.row.status?a("div",{staticClass:"status-div-error"},[t._v("错 误")]):a("div",[t._v("未知")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最后读入",prop:"lastReadIn","min-width":"100",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"最后写出",prop:"lastWriteOut","min-width":"100",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"最近变更",prop:"lastChange","min-width":"100",align:"center",sortable:"custom"}}),t._v(" "),a("el-table-column",{attrs:{label:"最后执行状态",prop:"lastExecuteStatus","min-width":"130",align:"center",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.lastExecuteStatus?a("div",[t._v("创建")]):1==e.row.lastExecuteStatus?a("div",[t._v("运行中")]):2==e.row.lastExecuteStatus?a("div",[t._v("完成")]):-1==e.row.lastExecuteStatus?a("div",[t._v("失败")]):-2==e.row.lastExecuteStatus?a("div",[t._v("终止")]):a("div",[t._v("未知")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最后执行时间",prop:"lastExecuteTime","min-width":"130",formatter:t.dateFormat,align:"center",sortable:"custom"}})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[8,16,50,100],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.totalElements},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],t._v(" "),a("router-view")],2)])},staticRenderFns:[]}}});