{"version":3,"sources":["webpack:///./src/utils/request.js"],"names":["baseURL","getBaseURL","process","service","axios","create","timeout","interceptors","request","use","config","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","reject","response","err","responseMessage","data","message","status","Message","type","url","confirm","router","push","location","reload"],"mappings":"yFAKIA,EAAwDC,cAE5DD,GADcE,QAOd,IAAMC,EAAUC,MAAMC,QAEpBL,QAASA,EAETM,QAAS,MAIXH,EAAQI,aAAaC,QAAQC,IAC3B,SAAAC,GAME,OAAOA,GAET,SAAAC,GAGE,OAAOC,EAAAC,EAAQC,OAAOH,KAK1BR,EAAQI,aAAaQ,SAASN,IAW5B,SAAAM,GACE,OAAOA,GAET,SAAAC,GAQE,GAAIA,GAAOA,EAAID,SAAU,CACvB,IAAIE,EAAkBD,EAAID,SAASG,KAAKC,QACxC,OAAQH,EAAID,SAASK,QACnB,KAAK,IACHJ,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,UAC1CI,SACEF,QAAS,UACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QACXF,cAA8BD,EAAID,SAASL,OAAOa,IACpDF,SACEF,QAAS,qCACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IAGH,GAFAN,EAAID,SAASI,QAAUF,GAAmB,UAIxC,wCADAD,EAAID,SAASG,KAAb,UAEA,EAEqB,IAAjBM,QADM,sBAERC,OAAOC,KAAK,UACZC,SAASC,UAKb,MAEF,KAAK,IACHZ,EAAID,SAASI,QAAUF,GAAmB,QAC1CI,SACEF,QAAS,QACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,QAC1CI,SACEF,QAAS,QACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,OAC1CI,SACEF,QAAS,OACTG,KAAM,YAER,MAEF,KAAK,IACHN,EAAID,SAASI,QAAUF,GAAmB,aAC1CI,SACEF,QAAS,aACTG,KAAM,YAER,MAEF,QACEN,EAAID,SAASI,QAAUF,GAG7B,OAAOL,EAAAC,EAAQC,OAAOE,KAIXb","file":"static/js/0.602a1b51149a6e25bd39.js","sourcesContent":["// import axios from \"axios\";\r\n\r\n// import store from '@/store'\r\nimport { getBaseURL } from \"@/utils/util\";\r\n\r\nlet baseURL = process.env.BASE_URL ? process.env.BASE_URL : getBaseURL();\r\nlet baseENV = process.env.BASE_ENV;\r\nbaseURL += baseENV;\r\n\r\n// console.log(\"baseURL\", baseURL);\r\n// console.log(\"baseENV\", baseENV);\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  // baseURL: process.env.VUE_APP_BASE_API, // api 的 base_url\r\n  baseURL: baseURL, // api 的 base_url\r\n  // withCredentials: true, // 跨域请求时发送 cookies\r\n  timeout: 5000 // request timeout\r\n});\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // Do something before request is sent\r\n    // if (store.getters.token) {\r\n    //   // 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改\r\n    //   config.headers['X-Token'] = getToken()\r\n    // }\r\n    return config;\r\n  },\r\n  error => {\r\n    // Do something with request error\r\n    // console.log(error); // for debug\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get information such as headers or status\r\n   * Please return  response => response\r\n   */\r\n  /**\r\n   * 下面的注释为通过在response里，自定义code来标示请求状态\r\n   * 当code返回如下情况则说明权限有问题，登出并返回到登录页\r\n   * 如想通过 XMLHttpRequest 来状态码标识 逻辑可写在下面error中\r\n   * 以下代码均为样例，请结合自生需求加以修改，若不需要，则可删除\r\n   */\r\n  response => {\r\n    return response;\r\n  },\r\n  err => {\r\n    // console.log('err' + error) // for debug\r\n    // Message({\r\n    //   message: error.message,\r\n    //   type: 'error',\r\n    //   duration: 5 * 1000\r\n    // })\r\n\r\n    if (err && err.response) {\r\n      var responseMessage = err.response.data.message;\r\n      switch (err.response.status) {\r\n        case 400:\r\n          err.response.message = responseMessage || \"请求错误\";\r\n          Message({\r\n            message: \"请求错误\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 401:\r\n          err.response.message = responseMessage || \"未授权，请登录\";\r\n          Message({\r\n            message: \"未授权，请登录\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 403:\r\n          err.response.message = responseMessage || \"拒绝访问\";\r\n          Message({\r\n            message: \"拒绝访问\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 404:\r\n          err.response.message =\r\n            responseMessage || `请求地址出错: ${err.response.config.url}`;\r\n          Message({\r\n            message: \"请求地址出错: ${err.response.config.url}\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 405:\r\n          err.response.message = responseMessage || \"拒绝访问\";\r\n          Message({\r\n            message: \"拒绝访问\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 408:\r\n          err.response.message = responseMessage || \"请求超时\";\r\n          Message({\r\n            message: \"请求超时\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 500:\r\n          err.response.message = responseMessage || \"服务器内部错误\";\r\n\r\n          if (\r\n            err.response.data[\"exception\"] ===\r\n            \"io.jsonwebtoken.ExpiredJwtException\"\r\n          ) {\r\n            var msg = \"Token过期 超时,请重新登陆\";\r\n            if (confirm(msg) === true) {\r\n              router.push(\"/login\");\r\n              location.reload();\r\n            } else {\r\n            }\r\n          } else {\r\n          }\r\n          break;\r\n\r\n        case 501:\r\n          err.response.message = responseMessage || \"服务未实现\";\r\n          Message({\r\n            message: \"服务未实现\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 502:\r\n          err.response.message = responseMessage || \"网络错误\";\r\n          Message({\r\n            message: \"网络错误\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 503:\r\n          err.response.message = responseMessage || \"服务不可用\";\r\n          Message({\r\n            message: \"服务不可用\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 504:\r\n          err.response.message = responseMessage || \"网络超时\";\r\n          Message({\r\n            message: \"网络超时\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        case 505:\r\n          err.response.message = responseMessage || \"HTTP版本不受支持\";\r\n          Message({\r\n            message: \"HTTP版本不受支持\",\r\n            type: \"warning\"\r\n          });\r\n          break;\r\n\r\n        default:\r\n          err.response.message = responseMessage;\r\n      }\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default service;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js"],"sourceRoot":""}